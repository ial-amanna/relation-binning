{"ast":null,"code":"import React,{useRef,useEffect,useState}from'react';import*as d3 from'd3';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ScatterPlot=_ref=>{let{data}=_ref;const svgRef=useRef();const[xAxis,setXAxis]=useState(\"\");const[yAxis,setYAxis]=useState(\"\");const[colorEncoding,setColorEncoding]=useState(\"\");const handleXAxisChange=event=>{setXAxis(event.target.value);};const handleYAxisChange=event=>{setYAxis(event.target.value);};const handleColorChange=event=>{setColorEncoding(event.target.value);};useEffect(()=>{if(data.length>0){if(!xAxis){setXAxis(Object.keys(data[0])[0]);}if(!yAxis){setYAxis(Object.keys(data[0])[1]);}drawScatterPlot();}},[data,xAxis,yAxis,colorEncoding]);const drawScatterPlot=()=>{const svg=d3.select(svgRef.current);svg.selectAll('*').remove();const width=600;const height=400;const margin={top:20,right:50,bottom:50,left:50};const x=d3.scaleLinear().domain(d3.extent(data,d=>+d[xAxis])).nice().range([margin.left,width-margin.right]);const y=d3.scaleLinear().domain(d3.extent(data,d=>+d[yAxis])).nice().range([height-margin.bottom,margin.top]);const xAxisG=g=>g.attr('transform',\"translate(0,\".concat(height-margin.bottom,\")\")).call(d3.axisBottom(x).ticks(width/80)).call(g=>g.select('.domain').remove());const yAxisG=g=>g.attr('transform',\"translate(\".concat(margin.left,\",0)\")).call(d3.axisLeft(y)).call(g=>g.select('.domain').remove());const uniqueValues=[...new Set(data.map(d=>d[colorEncoding]))];const colorScale=d3.scaleOrdinal().domain(uniqueValues).range(d3.schemeCategory10);svg.append('g').selectAll('circle').data(data).join('circle').attr('cx',d=>x(+d[xAxis])).attr('cy',d=>y(+d[yAxis])).attr('r',2.5).attr('fill',d=>colorScale(d[colorEncoding]));svg.append('g').call(xAxisG);svg.append('g').call(yAxisG);svg.append('text').attr('x',width/2).attr('y',height-6).attr('text-anchor','middle').text(xAxis);svg.append('text').attr('x',-height/2).attr('y',15).attr('text-anchor','middle').attr('transform','rotate(-90)').text(yAxis);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 w-1/2 text-sm\",children:[/*#__PURE__*/_jsx(\"svg\",{ref:svgRef,width:600,height:400}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"xAxis\",children:\"X Axis:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"xAxis\",value:xAxis,onChange:handleXAxisChange,children:data[0]&&Object.keys(data[0]).map(key=>/*#__PURE__*/_jsx(\"option\",{value:key,children:key},key))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"yAxis\",children:\"Y Axis:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"yAxis\",value:yAxis,onChange:handleYAxisChange,children:data[0]&&Object.keys(data[0]).map(key=>/*#__PURE__*/_jsx(\"option\",{value:key,children:key},key))}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"colorAxis\",children:\"Color Encoding:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"colorAxis\",value:colorEncoding,onChange:handleColorChange,children:data[0]&&Object.keys(data[0]).map(key=>/*#__PURE__*/_jsx(\"option\",{value:key,children:key},key))})]})});};export default ScatterPlot;","map":{"version":3,"names":["React","useRef","useEffect","useState","d3","jsx","_jsx","jsxs","_jsxs","ScatterPlot","_ref","data","svgRef","xAxis","setXAxis","yAxis","setYAxis","colorEncoding","setColorEncoding","handleXAxisChange","event","target","value","handleYAxisChange","handleColorChange","length","Object","keys","drawScatterPlot","svg","select","current","selectAll","remove","width","height","margin","top","right","bottom","left","x","scaleLinear","domain","extent","d","nice","range","y","xAxisG","g","attr","concat","call","axisBottom","ticks","yAxisG","axisLeft","uniqueValues","Set","map","colorScale","scaleOrdinal","schemeCategory10","append","join","text","children","className","ref","htmlFor","id","onChange","key"],"sources":["C:/ra_work/relation-binning/frontend/src/components/ScatterPlot.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nconst ScatterPlot = ({data}) => {\r\n  const svgRef = useRef();\r\n  const [xAxis,setXAxis] = useState(\"\");\r\n  const [yAxis,setYAxis] = useState(\"\");\r\n  const [colorEncoding,setColorEncoding] = useState(\"\");\r\n\r\n\r\nconst handleXAxisChange = (event) => {\r\n    setXAxis(event.target.value);\r\n};\r\n\r\nconst handleYAxisChange = (event) => {\r\n    setYAxis(event.target.value);\r\n};\r\n\r\nconst handleColorChange = (event) => {\r\n    setColorEncoding(event.target.value);\r\n};\r\n\r\n\r\n  useEffect(() => {\r\n    if (data.length > 0) {\r\n        if(!xAxis){\r\n            setXAxis(Object.keys(data[0])[0]);\r\n        }\r\n        if(!yAxis){\r\n            setYAxis(Object.keys(data[0])[1]);\r\n        }\r\n        drawScatterPlot();\r\n    }\r\n  }, [data, xAxis, yAxis, colorEncoding]);\r\n\r\n  const drawScatterPlot = () => {\r\n    const svg = d3.select(svgRef.current);\r\n    svg.selectAll('*').remove();\r\n\r\n    const width = 600;\r\n    const height = 400;\r\n    const margin = { top: 20, right: 50, bottom: 50, left: 50 };\r\n\r\n    const x = d3.scaleLinear()\r\n      .domain(d3.extent(data, d => +d[xAxis])).nice()\r\n      .range([margin.left, width - margin.right]);\r\n\r\n    const y = d3.scaleLinear()\r\n      .domain(d3.extent(data, d => +d[yAxis])).nice()\r\n      .range([height - margin.bottom, margin.top]);\r\n\r\n    const xAxisG = g => g\r\n      .attr('transform', `translate(0,${height - margin.bottom})`)\r\n      .call(d3.axisBottom(x).ticks(width / 80))\r\n      .call(g => g.select('.domain').remove());\r\n\r\n    const yAxisG = g => g\r\n      .attr('transform', `translate(${margin.left},0)`)\r\n      .call(d3.axisLeft(y))\r\n      .call(g => g.select('.domain').remove());\r\n\r\n    const uniqueValues = [...new Set(data.map(d => d[colorEncoding]))];\r\n    const colorScale = d3.scaleOrdinal()\r\n    .domain(uniqueValues)\r\n    .range(d3.schemeCategory10);\r\n\r\n    svg.append('g')\r\n      .selectAll('circle')\r\n      .data(data)\r\n      .join('circle')\r\n      .attr('cx', d => x(+d[xAxis]))\r\n      .attr('cy', d => y(+d[yAxis]))\r\n      .attr('r', 2.5)\r\n      .attr('fill', d=> colorScale(d[colorEncoding]));\r\n\r\n    svg.append('g').call(xAxisG);\r\n    svg.append('g').call(yAxisG);\r\n\r\n    svg.append('text')\r\n      .attr('x', width / 2)\r\n      .attr('y', height - 6)\r\n      .attr('text-anchor', 'middle')\r\n      .text(xAxis);\r\n\r\n    svg.append('text')\r\n      .attr('x', -height / 2)\r\n      .attr('y', 15)\r\n      .attr('text-anchor', 'middle')\r\n      .attr('transform', 'rotate(-90)')\r\n      .text(yAxis);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n        <div className='bg-blue-100 w-1/2 text-sm'>\r\n            <svg ref={svgRef} width={600} height={400}></svg>\r\n\r\n            <label htmlFor=\"xAxis\">X Axis:</label>\r\n            <select id=\"xAxis\" value={xAxis} onChange={handleXAxisChange}>\r\n                {data[0] && Object.keys(data[0]).map(key => (\r\n                    <option key={key} value={key}>{key}</option>\r\n                ))}\r\n            </select>\r\n\r\n            <label htmlFor=\"yAxis\">Y Axis:</label>\r\n            <select id=\"yAxis\" value={yAxis} onChange={handleYAxisChange}>\r\n                {data[0] && Object.keys(data[0]).map(key => (\r\n                    <option key={key} value={key}>{key}</option>\r\n                ))}\r\n            </select>\r\n\r\n            <label htmlFor=\"colorAxis\">Color Encoding:</label>\r\n            <select id=\"colorAxis\" value={colorEncoding} onChange={handleColorChange}>\r\n                {data[0] && Object.keys(data[0]).map(key => (\r\n                    <option key={key} value={key}>{key}</option>\r\n                ))}\r\n            </select>\r\n\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScatterPlot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}